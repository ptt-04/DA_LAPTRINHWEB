@model NguyenTienPhat_2280620311.Models.Order

<div class="container mt-4">
    <div class="card">
        <div class="card-header bg-info text-white">
            <h3 class="mb-0">Chi tiết đơn hàng #@Model.Id</h3>
        </div>
        <div class="card-body">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h5 class="text-muted mb-3">Thông tin đơn hàng</h5>
                    <p><strong>Mã đơn hàng:</strong> #@Model.Id</p>
                    <p><strong>Ngày đặt:</strong> @Model.OrderDate.ToString("dd/MM/yyyy HH:mm")</p>
                    <p><strong>Trạng thái:</strong> 
                        @{
                            string statusVN = Model.Status switch
                            {
                                NguyenTienPhat_2280620311.Models.OrderStatus.ChoXuLy => "Chờ xử lí",
                                NguyenTienPhat_2280620311.Models.OrderStatus.DangXuLy => "Đang xử lí",
                                NguyenTienPhat_2280620311.Models.OrderStatus.HoanThanh => "Hoàn thành",
                                _ => "Không xác định"
                            };
                        }
                        @statusVN
                    </p>
                    <p><strong>Tổng tiền:</strong> @Model.TotalPrice.ToString("#,##0") ₫</p>
                </div>
                <div class="col-md-6">
                    <h5 class="text-muted mb-3">Thông tin khách hàng</h5>
                    <p><strong>Họ tên:</strong> @Model.ApplicationUser?.FullName</p>
                    <p><strong>Địa chỉ:</strong> @Model.ShippingAddress</p>
                    <p><strong>Phường/Xã:</strong> @Model.Ward</p>
                    <p><strong>Quận/Huyện:</strong> @Model.District</p>
                    <p><strong>Tỉnh/Thành phố:</strong> @Model.City</p>
                    <p><strong>Ghi chú:</strong> @Model.Notes</p>
                </div>
            </div>

            <h5 class="text-muted mb-3">Chi tiết sản phẩm</h5>
            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead>
                        <tr>
                            <th style="width: 80px">Hình ảnh</th>
                            <th>Sản phẩm</th>
                            <th class="text-center" style="width: 100px">Số lượng</th>
                            <th class="text-end" style="width: 150px">Đơn giá</th>
                            <th class="text-end" style="width: 150px">Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.OrderDetails)
                        {
                            <tr>
                                <td>
                                    @if (!string.IsNullOrEmpty(item.Product?.ImageUrl))
                                    {
                                        <img src="@item.Product.ImageUrl" alt="@item.Product.Name" class="img-thumbnail" style="width: 60px; height: 60px; object-fit: cover;">
                                    }
                                    else
                                    {
                                        <img src="/images/default-product.png" alt="No Image" class="img-thumbnail" style="width: 60px; height: 60px; object-fit: cover;">
                                    }
                                </td>
                                <td>@item.Product?.Name</td>
                                <td class="text-center">@item.Quantity</td>
                                <td class="text-end">@item.Price.ToString("#,##0") ₫</td>
                                <td class="text-end">@((item.Price * item.Quantity).ToString("#,##0")) ₫</td>
                            </tr>
                        }
                        <tr class="table-info">
                            <td colspan="4" class="text-end"><strong>Tổng cộng:</strong></td>
                            <td class="text-end"><strong>@Model.TotalPrice.ToString("#,##0") ₫</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="text-center mt-4">
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="fas fa-arrow-left me-1"></i>Quay lại
                </a>
                <a asp-action="EditStatus" asp-route-id="@Model.Id" class="btn btn-warning ms-2">
                    <i class="fas fa-edit me-1"></i>Chỉnh sửa trạng thái
                </a>
            </div>
        </div>
    </div>
</div> 